<!DOCTYPE html>
<html>
    <head>
        <title>Multicomponent Test</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Tabbed interface containing a Tree and a Table">

        <!-- Facebook Meta Tags -->
        <meta property="og:url" content="https://invirganceopensource.github.io/emirgance/src/test/resources/multilayer.html">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Multicomponent Test">
        <meta property="og:description" content="Tabbed interface containing a Tree and a Table">
        <meta property="og:image" content="https://opengraph.b-cdn.net/production/images/2aa45214-d0de-4125-ac9e-9a07eefd5124.png?token=iAtDrD_86bI5-LkuLEMATWvTzcR2X1o3azDGEIuqCYs&height=580&width=1200&expires=33268395726">

        <!-- Twitter Meta Tags -->
        <meta name="twitter:card" content="summary_large_image">
        <meta property="twitter:domain" content="invirganceopensource.github.io">
        <meta property="twitter:url" content="https://invirganceopensource.github.io/emirgance/src/test/resources/multilayer.html">
        <meta name="twitter:title" content="Multicomponent Test">
        <meta name="twitter:description" content="Tabbed interface containing a Tree and a Table">
        <meta name="twitter:image" content="https://opengraph.b-cdn.net/production/images/2aa45214-d0de-4125-ac9e-9a07eefd5124.png?token=iAtDrD_86bI5-LkuLEMATWvTzcR2X1o3azDGEIuqCYs&height=580&width=1200&expires=33268395726">

        <script src="../../main/resources/base/base.js"></script>
        <script src="../../main/resources/code/panel.js" defer></script>
        <script src="../../main/resources/tab/panel.js"></script>
        <script src="../../main/resources/tree/panel.js"></script>
        <script src="../../main/resources/paginated/table.js"></script>
        <script src="../../main/resources/paginated/pager.js" defer></script>
        <script src="../../main/resources/paginated/display.js" defer></script>
        <script src="../../main/resources/paginated/search.js" defer></script>
        <link rel="stylesheet" href="../../main/resources/themes/base/tab/panel.css">
        <link rel="stylesheet" href="../../main/resources/themes/base/tree/panel.css">
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                var tree = document.getElementById("base-test");
                var display = document.getElementById("display");
                
                function formatPath(array)
                {
                    var path = "";
                    
                    for(var item of array)
                    {
                        if(path) path += " / ";
                        
                        path += item;
                    }
                    
                    return path;
                }
                
                tree.addEventListener("NodeSelected", function(event) {
                    
                    display.innerHTML = `<p>You <b>selected</b> node <i>${event.detail.label}</i></p>` +
                                        `<p><b>Path:</b> ${formatPath(event.detail.path)}</p>`;
                });
                
                tree.addEventListener("NodeAction", function(event) {
                    
                    display.innerHTML = `<p>You <b>activated</b> node <i>${event.detail.label}</i></p>` +
                                        `<p>Path: ${formatPath(event.detail.path)}</p>`;
                });
            });
        </script>
        <script>
            
            document.addEventListener("DOMContentLoaded", function() {
                var data = [
                    {Name: "Bob", Categories: 2, Products: 20},
                    {Name: "Larry", Categories: 1, Products: 12},
                    {Name: "Moe", Categories: 7, Products: 54},
                    {Name: "Curly", Categories: 4, Products: 4},
                    {Name: "Shemp", Categories: 8, Products: 14},
                    {Name: "Joe", Categories: 6, Products: 21}
                ];
                
                document.getElementById("testtable").data(data);
            });
        </script>
    </head>
    <body style="padding-top: 2rem;">
        <div style="max-width: 60%; margin: auto;">
        <tab-panel>
            <tab-buttons>
                <tab-button>
                    Tree
                </tab-button>
                <tab-button>
                    Table
                </tab-button>
                <tab-button>
                    Code
                </tab-button>
            </tab-buttons>
            <tab-content>
                
                <div style="display: flex; gap: 3em;">
                    <div style="height: 60vh; overflow: auto; min-width: 220px;">

                        <tree-panel id="base-test">
                            <tree-node>
                                <tree-label>About</tree-label>
                                <tree-node>
                                    <tree-label>Overview</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Administration</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Facts</tree-label>
                                    <tree-node>
                                        <tree-label>History</tree-label>
                                    </tree-node>
                                    <tree-node>
                                        <tree-label>Current Statistics</tree-label>
                                    </tree-node>
                                    <tree-node>
                                        <tree-label>Awards</tree-label>
                                    </tree-node>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Campus Tours</tree-label>
                                    <tree-node>
                                        <tree-label>For Prospective Students</tree-label>
                                    </tree-node>
                                    <tree-node>
                                        <tree-label>For Alumni</tree-label>
                                    </tree-node>
                                    <tree-node>
                                        <tree-label>For Visitors</tree-label>
                                    </tree-node>
                                </tree-node>
                            </tree-node>
                            <tree-node>
                                <tree-label>Admissions</tree-label>
                                <tree-node>
                                    <tree-label>Apply</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Tuition</tree-label>
                                    <tree-node>
                                        <tree-label>Undergraduate</tree-label>
                                    </tree-node>
                                    <tree-node>
                                        <tree-label>Graduate</tree-label>
                                    </tree-node>
                                    <tree-node>
                                        <tree-label>Professional Schools</tree-label>
                                    </tree-node>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Sign Up</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Visit</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Photo Tour</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Connect</tree-label>
                                </tree-node>
                            </tree-node>
                            <tree-node>
                                <tree-label>Academics</tree-label>
                                <tree-node>
                                    <tree-label>Colleges & Schools</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Programs of Study</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Honors Programs</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Online Courses</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Course Explorer</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Register for Classes</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Academic Calendar</tree-label>
                                </tree-node>
                                <tree-node>
                                    <tree-label>Transcripts</tree-label>
                                </tree-node>
                            </tree-node>
                        </tree-panel>

                    </div>
                
                    <div id="display">

                    </div>
                </div>

            </tab-content>
            <tab-content>
                <div style="height: 60vh; overflow: auto;">
                    
                    <div>
                        <paginated-search id="testsearch" table="#testtable">
                            <style></style>
                        </paginated-search>
                    </div>
                    <paginated-table id="testtable" page-size="3">
                        <columns>
                            <column>Name</column>
                            <column>Categories</column>
                            <column>Products</column>
                        </columns>
                        <link href="../../main/resources/themes/base/paginated/table.css" rel="stylesheet" type="text/css">
                    </paginated-table>
                    <div style="display: flex; align-items: center;">
                        <paginated-display table="#testtable" style="flex-grow: 1;">
                            <link href="../../main/resources/themes/base/paginated/display.css" rel="stylesheet" type="text/css">
                        </paginated-display>
                        <paginated-pager table="#testtable">
                            <link href="../../main/resources/themes/base/paginated/pager.css" rel="stylesheet" type="text/css">
                        </paginated-pager>
                    </div>
                </div>
            </tab-content>
            <tab-content style="padding: 0px;">
                <div style="height: 60vh; overflow: auto;" tabindex="0">
                    <code-panel type="javascript">
                        <link href="../../main/resources/themes/base/code/panel.css" rel="stylesheet" type="text/css">
                        <code>class WebComponentTemplate extends HTMLElement 
{
    static observedAttributes = ["YOUR", "ATTRIBUTES", "HERE"];

    #shadow;

    constructor() 
    {
        super();
    }

    #attachElements()
    {
        var that = this;

        if(!this.childNodes.length) return;

        // Pull in STYLE and LINK tags
        this.childNodes.forEach(function(element) {
            if(element.nodeName === "STYLE" || element.nodeName === "LINK")
            {
                that.#shadow.appendChild(element);
            }
        });

        // Add your rendering code here
    }

    connectedCallback()
    {
        var that = this;
        var observer = new MutationObserver(function(mutations) {
            that.#attachElements();
         });

        observer.observe(this, {attributes: false, childList: true, characterData: false, subtree: false});

        this.#shadow = this.attachShadow({ mode: "open" });

        this.#attachElements(); // Attempt to load in case we've been invoked late
    }
}

customElements.define("YOUR-TAG-NAME", WebComponentTemplate);</code>
                </div>
            </tab-content>
        </tab-panel>
        </div>
    </body>
</html>
